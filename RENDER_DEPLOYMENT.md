# üöÄ HackForge Render Deployment Guide

This guide will help you deploy HackForge on Render, a modern cloud platform for hosting web services.

## üìã Prerequisites

Before deploying, make sure you have:

1. **GitHub Repository**: Your code pushed to GitHub
2. **MongoDB Atlas Account**: For database hosting
3. **Google Gemini API Key**: For AI code generation
4. **Redis Cloud Account** (Optional): For caching
5. **Render Account**: Sign up at [render.com](https://render.com)

## üîß Pre-Deployment Setup

### 1. Environment Variables

Create a `.env.production` file with your production values:

```bash
# Frontend Environment Variables
NEXT_PUBLIC_API_URL=https://your-backend-service.onrender.com
NEXT_PUBLIC_SITE_URL=https://your-frontend-service.onrender.com

# Backend Environment Variables
NODE_ENV=production
PORT=10000
FRONTEND_URL=https://your-frontend-service.onrender.com

# Database Configuration (MongoDB Atlas)
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/hackforge?retryWrites=true&w=majority

# AI API Keys
GEMINI_API_KEY=your_actual_gemini_api_key

# Security (Auto-generated by Render)
JWT_SECRET=auto_generated_by_render
ENCRYPTION_KEY=auto_generated_by_render

# Redis Configuration (Redis Cloud)
REDIS_URL=redis://username:password@host:port
```

### 2. Database Setup (MongoDB Atlas)

1. Create a MongoDB Atlas account
2. Create a new cluster
3. Get your connection string
4. Update `MONGODB_URI` in your environment variables

### 3. Redis Setup (Optional)

1. Create a Redis Cloud account
2. Create a new database
3. Get your connection string
4. Update `REDIS_URL` in your environment variables

## üöÄ Deployment Steps

### Option 1: Automatic Deployment (Recommended)

1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Add Render deployment configuration"
   git push origin main
   ```

2. **Connect to Render**
   - Go to [dashboard.render.com](https://dashboard.render.com)
   - Click "New +" ‚Üí "Blueprint"
   - Connect your GitHub repository
   - Render will automatically detect the `render.yaml` file

3. **Configure Services**
   - **Frontend**: Will be deployed as a web service
   - **Backend**: Will be deployed as a web service
   - **Redis**: Will be deployed as a Redis service

4. **Set Environment Variables**
   - Add your `GEMINI_API_KEY`
   - Add your `MONGODB_URI`
   - Add your `REDIS_URL` (if using Redis)

### Option 2: Manual Deployment

#### Deploy Backend First

1. **Create Web Service**
   - Name: `hackforge-backend`
   - Environment: `Node`
   - Build Command: `cd backend && npm install`
   - Start Command: `cd backend && npm start`

2. **Set Environment Variables**
   ```
   NODE_ENV=production
   PORT=10000
   FRONTEND_URL=https://your-frontend-url.onrender.com
   MONGODB_URI=your_mongodb_connection_string
   GEMINI_API_KEY=your_gemini_api_key
   JWT_SECRET=your_jwt_secret
   ENCRYPTION_KEY=your_encryption_key
   REDIS_URL=your_redis_connection_string
   ```

#### Deploy Frontend

1. **Create Web Service**
   - Name: `hackforge-frontend`
   - Environment: `Node`
   - Build Command: `npm install && npm run build`
   - Start Command: `npm start`

2. **Set Environment Variables**
   ```
   NODE_ENV=production
   NEXT_PUBLIC_API_URL=https://your-backend-url.onrender.com
   NEXT_PUBLIC_SITE_URL=https://your-frontend-url.onrender.com
   ```

## üîç Health Checks

Your services include health check endpoints:

- **Frontend**: `https://your-frontend-url.onrender.com/`
- **Backend**: `https://your-backend-url.onrender.com/health`

## üìä Monitoring

Render provides built-in monitoring:

- **Logs**: View real-time application logs
- **Metrics**: Monitor CPU, memory, and network usage
- **Alerts**: Set up notifications for service issues

## üîß Troubleshooting

### Common Issues

1. **Build Failures**
   - Check build logs in Render dashboard
   - Ensure all dependencies are in `package.json`
   - Verify Node.js version compatibility

2. **Environment Variables**
   - Double-check all environment variables are set
   - Ensure API keys are valid
   - Verify database connection strings

3. **CORS Issues**
   - Update `FRONTEND_URL` in backend environment
   - Ensure URLs match exactly

4. **Database Connection**
   - Verify MongoDB Atlas network access
   - Check connection string format
   - Ensure database user has correct permissions

### Debug Commands

```bash
# Check backend health
curl https://your-backend-url.onrender.com/health

# Check frontend
curl https://your-frontend-url.onrender.com/

# View logs in Render dashboard
# Go to your service ‚Üí Logs tab
```

## üîí Security Best Practices

1. **Environment Variables**
   - Never commit secrets to Git
   - Use Render's environment variable management
   - Rotate API keys regularly

2. **Database Security**
   - Use MongoDB Atlas network access controls
   - Enable database user authentication
   - Regular security updates

3. **API Security**
   - Implement rate limiting
   - Validate all inputs
   - Use HTTPS only

## üìà Scaling

### Automatic Scaling
- Render automatically scales based on traffic
- Starter plans include basic scaling
- Upgrade to paid plans for advanced scaling

### Manual Scaling
- Adjust instance count in service settings
- Monitor resource usage
- Scale based on performance metrics

## üí∞ Cost Optimization

1. **Free Tier Limits**
   - 750 hours/month for free tier
   - Services sleep after 15 minutes of inactivity
   - Upgrade to paid plans for always-on services

2. **Resource Optimization**
   - Use appropriate instance sizes
   - Monitor and optimize database queries
   - Implement caching strategies

## üîó Useful Links

- [Render Documentation](https://render.com/docs)
- [MongoDB Atlas](https://www.mongodb.com/atlas)
- [Redis Cloud](https://redis.com/try-free/)
- [Google Gemini API](https://ai.google.dev/)

## üÜò Support

If you encounter issues:

1. Check Render's status page
2. Review application logs
3. Verify environment variables
4. Test locally first
5. Contact Render support if needed

---

**Happy Deploying! üöÄ**
